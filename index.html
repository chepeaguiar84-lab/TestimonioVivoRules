<html>
  <head>
    <title>Reglas pÃºblicas de Testimonio Vivo</title>
    <!-- LibrerÃ­a de Ã­conos Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <!-- Fuente elegante desde Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700&display=swap">
    <style>
      body { font-family: Arial, sans-serif; margin: 0; background-color: #fdfdfd; }

      /* Banner animado */
      header {
        background: linear-gradient(135deg, #ffd700, #ffcc00);
        color: #333;
        padding: 50px;
        text-align: center;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        animation: gradientShift 8s infinite alternate;
      }
      @keyframes gradientShift {
        0% { background: linear-gradient(135deg, #ffd700, #ffcc00); }
        100% { background: linear-gradient(135deg, #ffcc00, #ffd700); }
      }
      header h1 {
        margin: 0; font-size: 52px; font-weight: bold; font-family: 'Cinzel', serif;
        color: #333; display: flex; align-items: center; justify-content: center; gap: 15px;
        animation: fadeIn 3s ease-in-out;
      }
      header svg { width: 60px; height: 60px; fill: #b8860b; position: relative; }
      header p { margin: 10px 0 0; font-size: 22px; font-style: italic; color: #444; animation: fadeIn 4s ease-in-out; }

      /* Scroll reveal */
      .reveal { opacity: 0; transform: translateY(30px); transition: all 1s ease; }
      .reveal.active { opacity: 1; transform: translateY(0); }

      /* Firestore estilo fuego */
      h2.firestore-title {
        background: linear-gradient(90deg, red, orange, yellow);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 32px;
        position: relative;
      }
      h2.firestore-title::after {
        content: "ðŸ”¥ðŸ”¥ðŸ”¥";
        position: absolute;
        top: -10px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 28px;
        animation: flames 2s infinite alternate;
      }
      @keyframes flames {
        from { transform: translateY(0); opacity: 0.7; }
        to { transform: translateY(-5px); opacity: 1; }
      }
      .firestore {
        background-color: #fff5f5;
        border: 2px solid #ff4d4d;
        box-shadow: 0 0 15px rgba(255,0,0,0.6);
      }

      /* Storage estilo nube con lluvia */
      h2.storage-title {
        background: linear-gradient(90deg, #0066ff, #00ccff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 32px;
        position: relative;
      }
      h2.storage-title::after {
        content: "ðŸ’§ðŸ’§ðŸ’§";
        position: absolute;
        top: 40px;
        left: 0;
        width: 100%;
        text-align: center;
        font-size: 24px;
        animation: rain 1.5s infinite;
      }
      @keyframes rain {
        0% { transform: translateY(0); opacity: 1; }
        100% { transform: translateY(10px); opacity: 0; }
      }
      .storage {
        background-color: #f0f8ff;
        border: 2px solid #3399ff;
        box-shadow: 0 0 15px rgba(0,102,255,0.6);
      }

      pre {
        font-size: 20px; line-height: 1.6; padding: 20px; border-radius: 8px; overflow-x: auto;
      }

      footer { background-color: #333; color: white; text-align: center; padding: 20px; margin-top: 40px; }
      footer p { margin: 0; font-size: 16px; }
    </style>
  </head>
  <body>
    <header>
      <h1>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64">
          <path d="M32 2l8 20h20l-16 12 6 20-18-12-18 12 6-20-16-12h20z"/>
        </svg>
        Testimonio Vivo
      </h1>
      <p>Reglas pÃºblicas â€” Seguridad, transparencia y confianza</p>
    </header>

    <section>
      <h2 class="firestore-title reveal"><i class="fa-solid fa-database icon"></i> Firestore Rules</h2>
      <pre class="firestore reveal">
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }
    match /testimonios/{testimonioId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && resource.data.authorUid == request.auth.uid;
    }
    match /chats/{messageId} {
      allow read, write: if request.auth != null;
    }
    match /plans/{planId} {
      allow read: if true;
      allow write: if false;
    }
    match /donations/{donationId} {
      allow read: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
  }
}
      </pre>

      <h2 class="storage-title reveal"><i class="fa-solid fa-cloud icon"></i> Storage Rules</h2>
      <pre class="storage reveal">
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    match /testimonios/{testimonioId}/{fileName} {
      allow read: if request.auth != null;
      allow create: if request.auth != null 
                    && request.resource.size < 10 * 1024 * 1024;
      allow delete: if request.auth != null;
    }
    match /users/{userId}/profile.jpg {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId
                   && request.resource.size < 5 * 1024 * 1024;
    }
    match /chats/{chatId}/{fileName} {
      allow read, write: if request.auth != null;
    }
  }
}
      </pre>
    </section>

    <footer>
      <p><i class="fa-solid fa-lock"></i> Testimonio Vivo Â© 2026 â€” Seguridad y transparencia para la comunidad</p>
    </footer>

    <!-- Script scroll reveal -->
    <script>
      function revealOnScroll() {
        var reveals = document.querySelectorAll(".reveal");
        for (var i = 0; i < reveals.length; i++) {
          var windowHeight = window.innerHeight;
          var elementTop = reveals[i].getBoundingClientRect().top;
          var elementVisible = 100;
          if (elementTop < windowHeight - elementVisible) {
            reveals[i].classList.add("active");
          }
        }
      }
      window.addEventListener("scroll", revealOnScroll);
      window.addEventListener("load", revealOnScroll);
    </script>
  </body>
</html>
