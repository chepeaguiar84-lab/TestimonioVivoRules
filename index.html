<html>
<head>
  <title>Reglas p√∫blicas de Testimonio Vivo</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 40px; background: #111; color: #eee; }
    h1 { font-size: 48px; color: gold; text-align: center; margin-bottom: 20px; }
    .letter { display: inline-block; animation: drop 1s forwards; }
    .star { font-size: 40px; color: gold; text-shadow: 0 0 15px gold; animation: spin 6s linear infinite; }
    h2 { margin-top: 40px; font-size: 28px; display: flex; align-items: center; }
    pre { font-size: 18px; line-height: 1.6; background: #222; padding: 20px; border-radius: 8px; overflow-x: auto; }

    /* Animaciones */
    @keyframes drop { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
    @keyframes flame { 0% { color: orange; } 50% { color: red; text-shadow: 0 0 20px yellow; } 100% { color: orange; } }
    @keyframes rain { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(20px); opacity: 0; } }
    @keyframes flash { 0%, 100% { color: #eee; } 50% { color: #00f; text-shadow: 0 0 20px #fff; } }

    .fire { animation: flame 2s infinite; margin-right: 10px; }
    .cloud { animation: flash 3s infinite; margin-right: 10px; }
    .drop { display: inline-block; color: #0af; animation: rain 1s infinite; margin-left: 5px; }
  </style>
</head>
<body>
  <!-- T√≠tulo con letras doradas cayendo como teclas de piano -->
  <h1>
    <span class="letter" style="animation-delay:0s">T</span>
    <span class="letter" style="animation-delay:0.2s">e</span>
    <span class="letter" style="animation-delay:0.4s">s</span>
    <span class="letter" style="animation-delay:0.6s">t</span>
    <span class="letter" style="animation-delay:0.8s">i</span>
    <span class="letter" style="animation-delay:1s">m</span>
    <span class="letter" style="animation-delay:1.2s">o</span>
    <span class="letter" style="animation-delay:1.4s">n</span>
    <span class="letter" style="animation-delay:1.6s">i</span>
    <span class="letter" style="animation-delay:1.8s">o</span>
    <span class="letter" style="animation-delay:2s"> </span>
    <span class="letter" style="animation-delay:2.2s">V</span>
    <span class="letter" style="animation-delay:2.4s">i</span>
    <span class="letter" style="animation-delay:2.6s">v</span>
    <span class="letter" style="animation-delay:2.8s">o</span>
    <span class="star">‚òÖ</span>
  </h1>

  <!-- Firestore Rules con fuego animado -->
  <h2><span class="fire">üî•</span> Firestore Rules</h2>
  <pre>
rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // üë§ Perfiles de usuario
    match /users/{userId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && request.auth.uid == userId;
    }

    // üìñ Testimonios
    match /testimonios/{testimonioId} {
      allow read: if true;
      allow create: if request.auth != null;
      allow update, delete: if request.auth != null && resource.data.authorUid == request.auth.uid;
    }

    // üí¨ Salas de Chat y Se√±alizaci√≥n WebRTC
    match /rooms/{roomId} {
      allow read, write: if request.auth != null;

      match /messages/{messageId} {
        allow read, write: if request.auth != null;
      }

      match /candidates/{candidateId} {
        allow read, write: if request.auth != null;
      }
    }

    // üì° Chats Legacy
    match /chats/{messageId} {
      allow read, write: if request.auth != null;
    }

    // üíé Planes de Suscripci√≥n
    match /plans/{planId} {
      allow read: if true;
      allow write: if false;
    }

    // üí∞ Donaciones
    match /donations/{donationId} {
      allow read: if request.auth != null && request.auth.uid == resource.data.userId;
      allow create: if request.auth != null && request.auth.uid == request.resource.data.userId;
    }
  }
}
  </pre>

  <!-- Storage Rules con nube, rel√°mpagos y lluvia -->
  <h2><span class="cloud">‚òÅÔ∏è</span> Storage Rules <span class="drop">üíß</span><span class="drop">üíß</span></h2>
  <pre>
rules_version = '2';

service firebase.storage {
  match /b/{bucket}/o {
    
    // üé§ Fotos y audios de Testimonios
    match /testimonios/{testimonioId}/{fileName} {
      allow read: if request.auth != null;
      allow create: if request.auth != null && request.resource.size < 10 * 1024 * 1024;
      allow delete: if request.auth != null;
    }

    // üë§ Foto de perfil del usuario
    match /users/{userId}/profile.jpg {
      allow read: if request.auth != null;
      allow write: if request.auth != null 
                   && request.auth.uid == userId
                   && request.resource.size < 5 * 1024 * 1024
                   && request.resource.contentType.matches('image/.*');
    }

    // üí¨ Multimedia de Chats
    match /chats/{chatId}/{fileName} {
      allow read, write: if request.auth != null 
                         && request.resource.size < 15 * 1024 * 1024;
    }
  }
}
  </pre>
</body>
</html>
